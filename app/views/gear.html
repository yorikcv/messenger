<div class="container" ng-controller="GearCtrl">
    <label class="pull-right" ng-show="user">
        Welcome, <u><span>{{user.login}}</span></u>
    </label>
    <br/>
    <h3>GEAR</h3>
    <h4>Your Lenses</h4>
    <div class="lensesGear">
        <div ng-show="lenses.length != 0">
            <table class="table">
                <thead>
                    <tr>
                        <th>Manufacture</th>
                        <th>Lens name</th>
                        <th>Condition</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="lens in lenses | limitTo : limit = 10" ng-class="{editing: lens == editedLens}">
                        <td>
                            <div class="view">
                                {{lens.ManufacturerName}}
                            </div>
                            <form ng-submit="saveEdits(lens)" ng-show="lens == editedLens">
                                <select ng-model="selectedEditManufacturer" ng-change="loadLens(selectedEditManufacturer, 'edit')" ng-options="manufacturer.Name for manufacturer in optionsEditManufacturers"></select>
                            </form>
                        </td>
                        <td>
                            <div class="view">
                                {{lens.Name}}
                            </div>
                            <form ng-submit="saveEdits(lens)" ng-show="lens == editedLens">
                                <select ng-model="selectedEditLenses" ng-options="lenses.Name for lenses in optionsEditLenses">
                                </select>
                            </form>
                        </td>
                        <td>
                            <div class="view">
                                {{lens.Condition}}
                                <button class="btn-xs" ng-click="editLens(lens)">Edit</button>
                            </div>
                            <div ng-show="lens == editedLens">
                                <input class="edit" ng-model="lens.Condition">
                                <button class="btn-xs" ng-click="saveEdits(lens)">Save</button>
                                <button class="btn-xs" ng-click="deleteEdits(lens)" data-target=".deleteLens" data-toggle="modal">Delete</button>
                                <button class="btn-xs" ng-click="cancelEdits(lens)">Cancel</button>
                            </div>
                        </td>
                    </tr>
                    <tr ng-show="addingLens">
                        <td>
                            <form ng-submit="messenges.html">
                                <select ng-model="selectedManufacturer" ng-change="loadLens(selectedManufacturer)" ng-options="manufacturer.Name for manufacturer in optionsManufacturers">
                                    <option value="">-- choose Manufacturer --</option>
                                </select>
                            </form>
                        </td>
                        <td>
                            <form ng-submit="">
                                <select ng-model="selectedLenses" ng-options="lenses.Name for lenses in optionsLenses" lens-focus="optionsLenses.length">
                                    <option value="">-- choose Lenses --</option>
                                </select>
                            </form>
                        </td>
                        <td>
                            <form ng-submit="saveEdits(lens)">
                                <input class="edit" ng-model="selectedCondition">
                                <button class="btn-xs" ng-click="saveAdds()">Save</button>
                                <button class="btn-xs" ng-click="deleteAdds()">Delete</button>
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>
            <button class="btn" ng-click="showFormAddLens()">Add Lens</button>
        </div>
        <div ng-show="lenses.length == 0">
            <h3>You dont have Lenses</h3>
        </div>
    </div>
    <!-- Confirm delete modal -->
    <div class="modal fade deleteLens" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
                    <h4 class="modal-title" id="mySmallModalLabel">Do you realy want to delete this lens?<a class="anchorjs-link" href="#mySmallModalLabel"><span class="anchorjs-icon"></span></a></h4>
                </div>
                <div class="modal-body">
                    <button class="btn" ng-click="deleteLens()">Yes</button>
                    <button class="btn" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</div>
